<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cartão</title>

<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js')
        .then(() => console.log("Service Worker registrado"))
        .catch(err => console.log("Erro SW:", err));
}

function obterMatricula() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get("matricula");
}

function abrirImagem() {
    const matricula = obterMatricula();

    if (!matricula) {
        document.body.innerHTML = "<h2>Matrícula não informada!</h2>";
        return;
    }

    // CAMINHO RELATIVO (OBRIGATÓRIO)
    const imagemUrl = `/cartao_${matricula}.png`;

    // NÃO redireciona mais!
    // Apenas carrega a imagem na página
    document.body.innerHTML = `
        <h2>Cartão ${matricula}</h2>
        <img src="${imagemUrl}" style="width:100%;max-width:600px;">
    `;
}

window.onload = abrirImagem;
</script>

</head>
<body>
<h2>Carregando...</h2>
</body>
</html>
